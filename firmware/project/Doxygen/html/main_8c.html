<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: main.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">My Project
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('main_8c.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">main.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Project entry point: system and peripheral initialization, main control loop.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;mcc_generated_files/system.h&quot;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;xc.h&gt;</code><br />
<code>#include &lt;libpic30.h&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a99d7c812ba23bfdba5d29ec2fddf1e83" id="r_a99d7c812ba23bfdba5d29ec2fddf1e83"><td class="memItemLeft" align="right" valign="top"><a id="a99d7c812ba23bfdba5d29ec2fddf1e83" name="a99d7c812ba23bfdba5d29ec2fddf1e83"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>FCY</b>&#160;&#160;&#160;16000000UL</td></tr>
<tr class="separator:a99d7c812ba23bfdba5d29ec2fddf1e83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga602fa884c9450b231632506aaabff7e1" id="r_ga602fa884c9450b231632506aaabff7e1"><td class="memItemLeft" align="right" valign="top">
#define&#160;</td><td class="memItemRight" valign="bottom"><b>VEML3328_SLAVE_ADD</b>&#160;&#160;&#160;0x10</td></tr>
<tr class="memdesc:ga602fa884c9450b231632506aaabff7e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">7-bit I2C address of the VEML3328 color sensor. <br /></td></tr>
<tr class="separator:ga602fa884c9450b231632506aaabff7e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafb6b8c4d21f9183c9c65f548d976af2f" id="r_gafb6b8c4d21f9183c9c65f548d976af2f"><td class="memItemLeft" align="right" valign="top">
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CONF</b>&#160;&#160;&#160;0x00</td></tr>
<tr class="memdesc:gafb6b8c4d21f9183c9c65f548d976af2f"><td class="mdescLeft">&#160;</td><td class="mdescRight">VEML3328 Configuration register address. <br /></td></tr>
<tr class="separator:gafb6b8c4d21f9183c9c65f548d976af2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac51dc180dde0fcda153d9e61f5c0f2f8" id="r_gac51dc180dde0fcda153d9e61f5c0f2f8"><td class="memItemLeft" align="right" valign="top">
#define&#160;</td><td class="memItemRight" valign="bottom"><b>R_DATA</b>&#160;&#160;&#160;0x05</td></tr>
<tr class="memdesc:gac51dc180dde0fcda153d9e61f5c0f2f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Red channel data register address. <br /></td></tr>
<tr class="separator:gac51dc180dde0fcda153d9e61f5c0f2f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3e04dac31427580e1c0898b943261cee" id="r_ga3e04dac31427580e1c0898b943261cee"><td class="memItemLeft" align="right" valign="top">
#define&#160;</td><td class="memItemRight" valign="bottom"><b>G_DATA</b>&#160;&#160;&#160;0x06</td></tr>
<tr class="memdesc:ga3e04dac31427580e1c0898b943261cee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Green channel data register address. <br /></td></tr>
<tr class="separator:ga3e04dac31427580e1c0898b943261cee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga308224203f0b5eca59db631eb92d1c86" id="r_ga308224203f0b5eca59db631eb92d1c86"><td class="memItemLeft" align="right" valign="top">
#define&#160;</td><td class="memItemRight" valign="bottom"><b>B_DATA</b>&#160;&#160;&#160;0x07</td></tr>
<tr class="memdesc:ga308224203f0b5eca59db631eb92d1c86"><td class="mdescLeft">&#160;</td><td class="mdescRight">Blue channel data register address. <br /></td></tr>
<tr class="separator:ga308224203f0b5eca59db631eb92d1c86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf0b23eedf2352de4c1eff77e1401730c" id="r_gaf0b23eedf2352de4c1eff77e1401730c"><td class="memItemLeft" align="right" valign="top">
#define&#160;</td><td class="memItemRight" valign="bottom"><b>NUM_SAMPLES</b>&#160;&#160;&#160;5</td></tr>
<tr class="memdesc:gaf0b23eedf2352de4c1eff77e1401730c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of samples to average for noise reduction. <br /></td></tr>
<tr class="separator:gaf0b23eedf2352de4c1eff77e1401730c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga76fe84d83b8d236bd4f0d20d7e2ed06f" id="r_ga76fe84d83b8d236bd4f0d20d7e2ed06f"><td class="memItemLeft" align="right" valign="top">
#define&#160;</td><td class="memItemRight" valign="bottom"><b>PWM_FREQ</b>&#160;&#160;&#160;50</td></tr>
<tr class="memdesc:ga76fe84d83b8d236bd4f0d20d7e2ed06f"><td class="mdescLeft">&#160;</td><td class="mdescRight">PWM frequency in Hertz used by Timer2/OC1 for driving the servo. <br /></td></tr>
<tr class="separator:ga76fe84d83b8d236bd4f0d20d7e2ed06f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae2a7cd990460512f2695d999a0cbd45d" id="r_gae2a7cd990460512f2695d999a0cbd45d"><td class="memItemLeft" align="right" valign="top">
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SERVO_RIGHT</b>&#160;&#160;&#160;1400</td></tr>
<tr class="memdesc:gae2a7cd990460512f2695d999a0cbd45d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Timer count for a 1.0 ms pulse. <br /></td></tr>
<tr class="separator:gae2a7cd990460512f2695d999a0cbd45d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3d0ffe66e4e37785419f435378b0f223" id="r_ga3d0ffe66e4e37785419f435378b0f223"><td class="memItemLeft" align="right" valign="top">
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SERVO_LEFT</b>&#160;&#160;&#160;4800</td></tr>
<tr class="memdesc:ga3d0ffe66e4e37785419f435378b0f223"><td class="mdescLeft">&#160;</td><td class="mdescRight">Timer count for a 2.0 ms pulse. <br /></td></tr>
<tr class="separator:ga3d0ffe66e4e37785419f435378b0f223"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga25e994af4d0287a9d61c26dbc175ec88" id="r_ga25e994af4d0287a9d61c26dbc175ec88"><td class="memItemLeft" align="right" valign="top">
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SERVO_CENTER</b>&#160;&#160;&#160;3000</td></tr>
<tr class="memdesc:ga25e994af4d0287a9d61c26dbc175ec88"><td class="mdescLeft">&#160;</td><td class="mdescRight">Timer count for a 1.5 ms pulse. <br /></td></tr>
<tr class="separator:ga25e994af4d0287a9d61c26dbc175ec88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6b20d41d6252e9871430c242cb1a56e7" id="r_ga6b20d41d6252e9871430c242cb1a56e7"><td class="memItemLeft" align="right" valign="top">
#define&#160;</td><td class="memItemRight" valign="bottom"><b>BUFFER_SIZE</b>&#160;&#160;&#160;128</td></tr>
<tr class="memdesc:ga6b20d41d6252e9871430c242cb1a56e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Circular buffer size for UART RX. <br /></td></tr>
<tr class="separator:ga6b20d41d6252e9871430c242cb1a56e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga5c01e95ec3c881cdd00e311327126693" id="r_ga5c01e95ec3c881cdd00e311327126693"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__wifi.html#ga5c01e95ec3c881cdd00e311327126693">UART1_Init</a> (void)</td></tr>
<tr class="memdesc:ga5c01e95ec3c881cdd00e311327126693"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure UART1 for ESP8266 AT-command communication at 115200 baud.  <br /></td></tr>
<tr class="separator:ga5c01e95ec3c881cdd00e311327126693"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga226557d5e42f7e29ddaff30606138459" id="r_ga226557d5e42f7e29ddaff30606138459"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__wifi.html#ga226557d5e42f7e29ddaff30606138459">__attribute__</a> ((interrupt, no_auto_psv))</td></tr>
<tr class="memdesc:ga226557d5e42f7e29ddaff30606138459"><td class="mdescLeft">&#160;</td><td class="mdescRight">UART1 receive interrupt service routine.  <br /></td></tr>
<tr class="separator:ga226557d5e42f7e29ddaff30606138459"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae09db1d66bd1adcdd83dc5da5b92df01" id="r_gae09db1d66bd1adcdd83dc5da5b92df01"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__wifi.html#gae09db1d66bd1adcdd83dc5da5b92df01">UART1_SendString</a> (const char *str)</td></tr>
<tr class="memdesc:gae09db1d66bd1adcdd83dc5da5b92df01"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a null-terminated string over UART1.  <br /></td></tr>
<tr class="separator:gae09db1d66bd1adcdd83dc5da5b92df01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga750be53afe22b006b8b36b42f3c12323" id="r_ga750be53afe22b006b8b36b42f3c12323"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__wifi.html#ga750be53afe22b006b8b36b42f3c12323">cleanBuffer</a> ()</td></tr>
<tr class="memdesc:ga750be53afe22b006b8b36b42f3c12323"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clears the UART receive buffer.  <br /></td></tr>
<tr class="separator:ga750be53afe22b006b8b36b42f3c12323"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga77c4426d055fdae52de6699ad12977b8" id="r_ga77c4426d055fdae52de6699ad12977b8"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__wifi.html#ga77c4426d055fdae52de6699ad12977b8">UART_ReadString</a> (char *dest, unsigned max_len)</td></tr>
<tr class="memdesc:ga77c4426d055fdae52de6699ad12977b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads a string from the circular buffer (rx_buffer).  <br /></td></tr>
<tr class="separator:ga77c4426d055fdae52de6699ad12977b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3caa3ee64e1cd898153a982f04afd722" id="r_ga3caa3ee64e1cd898153a982f04afd722"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__wifi.html#ga3caa3ee64e1cd898153a982f04afd722">UART_DataReady</a> (void)</td></tr>
<tr class="memdesc:ga3caa3ee64e1cd898153a982f04afd722"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if data is available in the receive buffer.  <br /></td></tr>
<tr class="separator:ga3caa3ee64e1cd898153a982f04afd722"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a132ccc16e94acf34995b29762f916e07" id="r_a132ccc16e94acf34995b29762f916e07"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a132ccc16e94acf34995b29762f916e07">parseConfigMessage</a> (char *msg)</td></tr>
<tr class="memdesc:a132ccc16e94acf34995b29762f916e07"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parses configuration message in the format "CFG:Key=Value,...".  <br /></td></tr>
<tr class="separator:a132ccc16e94acf34995b29762f916e07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab52be1be8a40794a6b9df64a71a76fb4" id="r_ab52be1be8a40794a6b9df64a71a76fb4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab52be1be8a40794a6b9df64a71a76fb4">sendMovementCommand</a> (const char *side, const char *color)</td></tr>
<tr class="memdesc:ab52be1be8a40794a6b9df64a71a76fb4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends information on movement over the ESP8266 TCP link.  <br /></td></tr>
<tr class="separator:ab52be1be8a40794a6b9df64a71a76fb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9a6cca57e7cd20ae2ee6d92e289583ae" id="r_ga9a6cca57e7cd20ae2ee6d92e289583ae"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__servo.html#ga9a6cca57e7cd20ae2ee6d92e289583ae">servo_init</a> ()</td></tr>
<tr class="memdesc:ga9a6cca57e7cd20ae2ee6d92e289583ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize Timer2 and OC1 for PWM control of the servo.  <br /></td></tr>
<tr class="separator:ga9a6cca57e7cd20ae2ee6d92e289583ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga842b346ee987526048bdd1c50baf83e0" id="r_ga842b346ee987526048bdd1c50baf83e0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__servo.html#ga842b346ee987526048bdd1c50baf83e0">toggle_servo</a> ()</td></tr>
<tr class="memdesc:ga842b346ee987526048bdd1c50baf83e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cycle through CENTER -&gt; RIGHT -&gt; CENTER -&gt; LEFT -&gt; ...  <br /></td></tr>
<tr class="separator:ga842b346ee987526048bdd1c50baf83e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8f1aff0fabeb87f42932d5ce436f4d5c" id="r_ga8f1aff0fabeb87f42932d5ce436f4d5c"><td class="memItemLeft" align="right" valign="top">
void&#160;</td><td class="memItemRight" valign="bottom"><b>moveRight</b> ()</td></tr>
<tr class="memdesc:ga8f1aff0fabeb87f42932d5ce436f4d5c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move the servo fully to the right (0 degrees). <br /></td></tr>
<tr class="separator:ga8f1aff0fabeb87f42932d5ce436f4d5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7a5379770a3d9a90ee4d827046d26eb0" id="r_ga7a5379770a3d9a90ee4d827046d26eb0"><td class="memItemLeft" align="right" valign="top">
void&#160;</td><td class="memItemRight" valign="bottom"><b>moveLeft</b> ()</td></tr>
<tr class="memdesc:ga7a5379770a3d9a90ee4d827046d26eb0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move the servo fully to the left (180 degrees). <br /></td></tr>
<tr class="separator:ga7a5379770a3d9a90ee4d827046d26eb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga71a4d85e5291f6713792758b8d64d1c6" id="r_ga71a4d85e5291f6713792758b8d64d1c6"><td class="memItemLeft" align="right" valign="top">
void&#160;</td><td class="memItemRight" valign="bottom"><b>moveCenter</b> ()</td></tr>
<tr class="memdesc:ga71a4d85e5291f6713792758b8d64d1c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move the servo to the center (90 degrees). <br /></td></tr>
<tr class="separator:ga71a4d85e5291f6713792758b8d64d1c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga68cccc228da58de7746db167eaeea7b7" id="r_ga68cccc228da58de7746db167eaeea7b7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__servo.html#ga68cccc228da58de7746db167eaeea7b7">servo_set_angle</a> (int angle)</td></tr>
<tr class="memdesc:ga68cccc228da58de7746db167eaeea7b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set servo to an arbitrary angle between 0 and 180 degrees.  <br /></td></tr>
<tr class="separator:ga68cccc228da58de7746db167eaeea7b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2a4f4d7ea2f3b7b7f875e95d579812ad" id="r_ga2a4f4d7ea2f3b7b7f875e95d579812ad"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__color.html#ga2a4f4d7ea2f3b7b7f875e95d579812ad">VEML3328_init</a> ()</td></tr>
<tr class="memdesc:ga2a4f4d7ea2f3b7b7f875e95d579812ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the VEML3328 sensor with configured gain and integration time.  <br /></td></tr>
<tr class="separator:ga2a4f4d7ea2f3b7b7f875e95d579812ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga30da27c967c427811646a5a6f66f495f" id="r_ga30da27c967c427811646a5a6f66f495f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__color.html#ga30da27c967c427811646a5a6f66f495f">WS2812_Send_Byte</a> (uint8_t byte)</td></tr>
<tr class="memdesc:ga30da27c967c427811646a5a6f66f495f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a single byte to the WS2812 LED strip via SPI encoding.  <br /></td></tr>
<tr class="separator:ga30da27c967c427811646a5a6f66f495f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga938d9076304a30229d0cff9510c6b0de" id="r_ga938d9076304a30229d0cff9510c6b0de"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__color.html#ga938d9076304a30229d0cff9510c6b0de">WS2812_SetColor</a> (uint8_t red, uint8_t green, uint8_t blue)</td></tr>
<tr class="memdesc:ga938d9076304a30229d0cff9510c6b0de"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the color of the WS2812 LED strip.  <br /></td></tr>
<tr class="separator:ga938d9076304a30229d0cff9510c6b0de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga173beda109164a3bd6007b60aab9f712" id="r_ga173beda109164a3bd6007b60aab9f712"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__color.html#ga173beda109164a3bd6007b60aab9f712">VEML3328_read</a> ()</td></tr>
<tr class="memdesc:ga173beda109164a3bd6007b60aab9f712"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads raw color data from VEML3328 sensor and computes channel averages.  <br /></td></tr>
<tr class="separator:ga173beda109164a3bd6007b60aab9f712"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac2d7a769e281883a0956dceed09e6604" id="r_gac2d7a769e281883a0956dceed09e6604"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__color.html#gac2d7a769e281883a0956dceed09e6604">VEML3328_color_detection</a> (uint16_t <a class="el" href="group__color.html#gadc07744a7bedcd311a8618d141eb9522">avg_value_red</a>, uint16_t <a class="el" href="group__color.html#ga7b3bd317c47e4944542af39a7c18e82c">avg_value_green</a>, uint16_t <a class="el" href="group__color.html#ga8c00906ad2d2000612540a036140f2aa">avg_value_blue</a>)</td></tr>
<tr class="memdesc:gac2d7a769e281883a0956dceed09e6604"><td class="mdescLeft">&#160;</td><td class="mdescRight">Detects the current color based on averaged sensor values and acts accordingly.  <br /></td></tr>
<tr class="separator:gac2d7a769e281883a0956dceed09e6604"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5c7cf9db2f8b4ad6c509f61a9a89985" id="r_af5c7cf9db2f8b4ad6c509f61a9a89985"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af5c7cf9db2f8b4ad6c509f61a9a89985">populateColorArrayFromConfig</a> (void)</td></tr>
<tr class="memdesc:af5c7cf9db2f8b4ad6c509f61a9a89985"><td class="mdescLeft">&#160;</td><td class="mdescRight">Populates the color_array based on configuration flags.  <br /></td></tr>
<tr class="separator:af5c7cf9db2f8b4ad6c509f61a9a89985"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a840291bc02cba5474a4cb46a9b9566fe" id="r_a840291bc02cba5474a4cb46a9b9566fe"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a840291bc02cba5474a4cb46a9b9566fe">main</a> (void)</td></tr>
<tr class="separator:a840291bc02cba5474a4cb46a9b9566fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:gad2fd9b34ba5f73999809cd2e1fc5cf27" id="r_gad2fd9b34ba5f73999809cd2e1fc5cf27"><td class="memItemLeft" align="right" valign="top">
volatile char&#160;</td><td class="memItemRight" valign="bottom"><b>rx_buffer</b> [<a class="el" href="group__wifi.html#ga6b20d41d6252e9871430c242cb1a56e7">BUFFER_SIZE</a>]</td></tr>
<tr class="memdesc:gad2fd9b34ba5f73999809cd2e1fc5cf27"><td class="mdescLeft">&#160;</td><td class="mdescRight">UART receive buffer. <br /></td></tr>
<tr class="separator:gad2fd9b34ba5f73999809cd2e1fc5cf27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga41858b503d36fe5186ae7034da867fad" id="r_ga41858b503d36fe5186ae7034da867fad"><td class="memItemLeft" align="right" valign="top">
volatile uint16_t&#160;</td><td class="memItemRight" valign="bottom"><b>rx_head</b> = 0</td></tr>
<tr class="memdesc:ga41858b503d36fe5186ae7034da867fad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Head index of the circular buffer. <br /></td></tr>
<tr class="separator:ga41858b503d36fe5186ae7034da867fad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaace368ec3f8fd8ed460175fa3a85bf87" id="r_gaace368ec3f8fd8ed460175fa3a85bf87"><td class="memItemLeft" align="right" valign="top">
volatile uint16_t&#160;</td><td class="memItemRight" valign="bottom"><b>rx_tail</b> = 0</td></tr>
<tr class="memdesc:gaace368ec3f8fd8ed460175fa3a85bf87"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tail index of the circular buffer. <br /></td></tr>
<tr class="separator:gaace368ec3f8fd8ed460175fa3a85bf87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2f02c951091b93013b8b9781970eb454" id="r_ga2f02c951091b93013b8b9781970eb454"><td class="memItemLeft" align="right" valign="top">
const char *&#160;</td><td class="memItemRight" valign="bottom"><b>CMD_AT</b> = &quot;AT\r\n&quot;</td></tr>
<tr class="memdesc:ga2f02c951091b93013b8b9781970eb454"><td class="mdescLeft">&#160;</td><td class="mdescRight">AT command to test communication. <br /></td></tr>
<tr class="separator:ga2f02c951091b93013b8b9781970eb454"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1f3bff4b7aba7c018b667b8dc2b754ef" id="r_ga1f3bff4b7aba7c018b667b8dc2b754ef"><td class="memItemLeft" align="right" valign="top">
const char *&#160;</td><td class="memItemRight" valign="bottom"><b>CMD_RST</b> = &quot;AT+RST\r\n&quot;</td></tr>
<tr class="memdesc:ga1f3bff4b7aba7c018b667b8dc2b754ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">AT command to reset the module. <br /></td></tr>
<tr class="separator:ga1f3bff4b7aba7c018b667b8dc2b754ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9a2787e0ab5fa4f0c41fa2c09b4ab6b6" id="r_ga9a2787e0ab5fa4f0c41fa2c09b4ab6b6"><td class="memItemLeft" align="right" valign="top">
const char *&#160;</td><td class="memItemRight" valign="bottom"><b>CMD_GMR</b> = &quot;AT+GMR\r\n&quot;</td></tr>
<tr class="memdesc:ga9a2787e0ab5fa4f0c41fa2c09b4ab6b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">AT command to get firmware version. <br /></td></tr>
<tr class="separator:ga9a2787e0ab5fa4f0c41fa2c09b4ab6b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5143a707f11ad9c09203675081255f6f" id="r_ga5143a707f11ad9c09203675081255f6f"><td class="memItemLeft" align="right" valign="top">
const char *&#160;</td><td class="memItemRight" valign="bottom"><b>CMD_MODE</b> = &quot;AT+CWMODE=1\r\n&quot;</td></tr>
<tr class="memdesc:ga5143a707f11ad9c09203675081255f6f"><td class="mdescLeft">&#160;</td><td class="mdescRight">AT command to set mode (1 = Station mode) <br /></td></tr>
<tr class="separator:ga5143a707f11ad9c09203675081255f6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaff3173962307965de346f4d909e7e60b" id="r_gaff3173962307965de346f4d909e7e60b"><td class="memItemLeft" align="right" valign="top">
const char *&#160;</td><td class="memItemRight" valign="bottom"><b>CMD_WIFI_CONN</b> = &quot;AT+CWJAP=\&quot;etfbl.net\&quot;,\&quot;\&quot;\r\n&quot;</td></tr>
<tr class="memdesc:gaff3173962307965de346f4d909e7e60b"><td class="mdescLeft">&#160;</td><td class="mdescRight">AT command to connect to WiFi network. <br /></td></tr>
<tr class="separator:gaff3173962307965de346f4d909e7e60b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4219f0d66299cffedf222d1dc8855d16" id="r_ga4219f0d66299cffedf222d1dc8855d16"><td class="memItemLeft" align="right" valign="top">
const char *&#160;</td><td class="memItemRight" valign="bottom"><b>CMD_CHECK_IP</b> = &quot;AT+CIFSR\r\n&quot;</td></tr>
<tr class="memdesc:ga4219f0d66299cffedf222d1dc8855d16"><td class="mdescLeft">&#160;</td><td class="mdescRight">AT command to get IP address. <br /></td></tr>
<tr class="separator:ga4219f0d66299cffedf222d1dc8855d16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabb0a03ee6dcc397253ca31f83a30cfb5" id="r_gabb0a03ee6dcc397253ca31f83a30cfb5"><td class="memItemLeft" align="right" valign="top">
const char *&#160;</td><td class="memItemRight" valign="bottom"><b>CMD_CONN_TYPE</b> = &quot;AT+CIPMUX=0\r\n&quot;</td></tr>
<tr class="memdesc:gabb0a03ee6dcc397253ca31f83a30cfb5"><td class="mdescLeft">&#160;</td><td class="mdescRight">AT command to configure connection mode (0 = Single connection) <br /></td></tr>
<tr class="separator:gabb0a03ee6dcc397253ca31f83a30cfb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5d787dab9afed7007f302b8d82443c59" id="r_ga5d787dab9afed7007f302b8d82443c59"><td class="memItemLeft" align="right" valign="top">
const char *&#160;</td><td class="memItemRight" valign="bottom"><b>CMD_START_TCP</b> = &quot;AT+CIPSTART=\&quot;TCP\&quot;,\&quot;10.99.131.221\&quot;,8084\r\n&quot;</td></tr>
<tr class="memdesc:ga5d787dab9afed7007f302b8d82443c59"><td class="mdescLeft">&#160;</td><td class="mdescRight">AT command to start TCP connection. <br /></td></tr>
<tr class="separator:ga5d787dab9afed7007f302b8d82443c59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabcee2b0af8d8dccca4398ed6cb0978dc" id="r_gabcee2b0af8d8dccca4398ed6cb0978dc"><td class="memItemLeft" align="right" valign="top">
const char *&#160;</td><td class="memItemRight" valign="bottom"><b>CMD_SEND</b> = &quot;AT+CIPSEND=5\r\n&quot;</td></tr>
<tr class="memdesc:gabcee2b0af8d8dccca4398ed6cb0978dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">AT command to send 5 bytes of data. <br /></td></tr>
<tr class="separator:gabcee2b0af8d8dccca4398ed6cb0978dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada4f427390971e4e8e75ce0ea2261de0" id="r_ada4f427390971e4e8e75ce0ea2261de0"><td class="memItemLeft" align="right" valign="top"><a id="ada4f427390971e4e8e75ce0ea2261de0" name="ada4f427390971e4e8e75ce0ea2261de0"></a>
volatile char&#160;</td><td class="memItemRight" valign="bottom"><b>configRed</b></td></tr>
<tr class="separator:ada4f427390971e4e8e75ce0ea2261de0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace31a14db6ccf7b0850ae14144a0b69b" id="r_ace31a14db6ccf7b0850ae14144a0b69b"><td class="memItemLeft" align="right" valign="top"><a id="ace31a14db6ccf7b0850ae14144a0b69b" name="ace31a14db6ccf7b0850ae14144a0b69b"></a>
volatile char&#160;</td><td class="memItemRight" valign="bottom"><b>configGreen</b></td></tr>
<tr class="separator:ace31a14db6ccf7b0850ae14144a0b69b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:addab54a7706bd6b3ed97c6b94928e48b" id="r_addab54a7706bd6b3ed97c6b94928e48b"><td class="memItemLeft" align="right" valign="top"><a id="addab54a7706bd6b3ed97c6b94928e48b" name="addab54a7706bd6b3ed97c6b94928e48b"></a>
volatile char&#160;</td><td class="memItemRight" valign="bottom"><b>configBlue</b></td></tr>
<tr class="separator:addab54a7706bd6b3ed97c6b94928e48b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1157bd21951255fb075598ff53b4d6fa" id="r_a1157bd21951255fb075598ff53b4d6fa"><td class="memItemLeft" align="right" valign="top"><a id="a1157bd21951255fb075598ff53b4d6fa" name="a1157bd21951255fb075598ff53b4d6fa"></a>
volatile char&#160;</td><td class="memItemRight" valign="bottom"><b>configYellow</b></td></tr>
<tr class="separator:a1157bd21951255fb075598ff53b4d6fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42e6537d762f6735b0186e173fb952e7" id="r_a42e6537d762f6735b0186e173fb952e7"><td class="memItemLeft" align="right" valign="top"><a id="a42e6537d762f6735b0186e173fb952e7" name="a42e6537d762f6735b0186e173fb952e7"></a>
volatile char&#160;</td><td class="memItemRight" valign="bottom"><b>configPurple</b></td></tr>
<tr class="separator:a42e6537d762f6735b0186e173fb952e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4bfc33636a6394ce17ee092f652ce588" id="r_a4bfc33636a6394ce17ee092f652ce588"><td class="memItemLeft" align="right" valign="top"><a id="a4bfc33636a6394ce17ee092f652ce588" name="a4bfc33636a6394ce17ee092f652ce588"></a>
volatile char&#160;</td><td class="memItemRight" valign="bottom"><b>configOrange</b></td></tr>
<tr class="separator:a4bfc33636a6394ce17ee092f652ce588"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae30d154dae4bd006f2900fcf19a672fc" id="r_ae30d154dae4bd006f2900fcf19a672fc"><td class="memItemLeft" align="right" valign="top"><a id="ae30d154dae4bd006f2900fcf19a672fc" name="ae30d154dae4bd006f2900fcf19a672fc"></a>
volatile char&#160;</td><td class="memItemRight" valign="bottom"><b>configBlack</b></td></tr>
<tr class="separator:ae30d154dae4bd006f2900fcf19a672fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aafd269ef987acf26c6fadc3f68bd579c" id="r_aafd269ef987acf26c6fadc3f68bd579c"><td class="memItemLeft" align="right" valign="top"><a id="aafd269ef987acf26c6fadc3f68bd579c" name="aafd269ef987acf26c6fadc3f68bd579c"></a>
volatile char&#160;</td><td class="memItemRight" valign="bottom"><b>configWhite</b></td></tr>
<tr class="separator:aafd269ef987acf26c6fadc3f68bd579c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb1197d47c6665382ea79e9094bd33e6" id="r_abb1197d47c6665382ea79e9094bd33e6"><td class="memItemLeft" align="right" valign="top"><a id="abb1197d47c6665382ea79e9094bd33e6" name="abb1197d47c6665382ea79e9094bd33e6"></a>
volatile char&#160;</td><td class="memItemRight" valign="bottom"><b>configBrown</b></td></tr>
<tr class="separator:abb1197d47c6665382ea79e9094bd33e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadc07744a7bedcd311a8618d141eb9522" id="r_gadc07744a7bedcd311a8618d141eb9522"><td class="memItemLeft" align="right" valign="top">
static uint16_t&#160;</td><td class="memItemRight" valign="bottom"><b>avg_value_red</b></td></tr>
<tr class="memdesc:gadc07744a7bedcd311a8618d141eb9522"><td class="mdescLeft">&#160;</td><td class="mdescRight">Average red channel value across samples. <br /></td></tr>
<tr class="separator:gadc07744a7bedcd311a8618d141eb9522"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7b3bd317c47e4944542af39a7c18e82c" id="r_ga7b3bd317c47e4944542af39a7c18e82c"><td class="memItemLeft" align="right" valign="top">
static uint16_t&#160;</td><td class="memItemRight" valign="bottom"><b>avg_value_green</b></td></tr>
<tr class="memdesc:ga7b3bd317c47e4944542af39a7c18e82c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Average green channel value across samples. <br /></td></tr>
<tr class="separator:ga7b3bd317c47e4944542af39a7c18e82c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8c00906ad2d2000612540a036140f2aa" id="r_ga8c00906ad2d2000612540a036140f2aa"><td class="memItemLeft" align="right" valign="top">
static uint16_t&#160;</td><td class="memItemRight" valign="bottom"><b>avg_value_blue</b></td></tr>
<tr class="memdesc:ga8c00906ad2d2000612540a036140f2aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Average blue channel value across samples. <br /></td></tr>
<tr class="separator:ga8c00906ad2d2000612540a036140f2aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2de312dc84bb394e0396fb44fb5595be" id="r_a2de312dc84bb394e0396fb44fb5595be"><td class="memItemLeft" align="right" valign="top"><a id="a2de312dc84bb394e0396fb44fb5595be" name="a2de312dc84bb394e0396fb44fb5595be"></a>
char&#160;</td><td class="memItemRight" valign="bottom"><b>color_array</b> [9] = {0}</td></tr>
<tr class="memdesc:a2de312dc84bb394e0396fb44fb5595be"><td class="mdescLeft">&#160;</td><td class="mdescRight">Array indicating tiles color servo side L(1)/R(0). <br /></td></tr>
<tr class="separator:a2de312dc84bb394e0396fb44fb5595be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb824be75611cc83b9b6e8d18b66bfc1" id="r_aeb824be75611cc83b9b6e8d18b66bfc1"><td class="memItemLeft" align="right" valign="top"><a id="aeb824be75611cc83b9b6e8d18b66bfc1" name="aeb824be75611cc83b9b6e8d18b66bfc1"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><b>counter</b> = 0</td></tr>
<tr class="separator:aeb824be75611cc83b9b6e8d18b66bfc1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1abe4bb82b66a11a41add83e7ef7b8b1" id="r_a1abe4bb82b66a11a41add83e7ef7b8b1"><td class="memItemLeft" align="right" valign="top"><a id="a1abe4bb82b66a11a41add83e7ef7b8b1" name="a1abe4bb82b66a11a41add83e7ef7b8b1"></a>
volatile bool&#160;</td><td class="memItemRight" valign="bottom"><b>simulationEnabled</b> = false</td></tr>
<tr class="memdesc:a1abe4bb82b66a11a41add83e7ef7b8b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Global flag to control simulation state (true = running, false = paused). <br /></td></tr>
<tr class="separator:a1abe4bb82b66a11a41add83e7ef7b8b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Project entry point: system and peripheral initialization, main control loop. </p>
<p>Performs startup of I2C, UART, SPI, PWM servo, and Wi-Fi; contains a loop that parses UART commands, reads/averages color sensor data, drives the servo/LEDs, and sends movement messages over TCP to the java Application. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a840291bc02cba5474a4cb46a9b9566fe" name="a840291bc02cba5474a4cb46a9b9566fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a840291bc02cba5474a4cb46a9b9566fe">&#9670;&#160;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>RIGHT SET 0</p>
<p>Initialization</p>
<p>WiFi Connection Sequence Set WiFi mode to Station</p>
<p>Connect to the WiFi network (SSID "etfbl.net" with no password).</p>
<p>TCP Connection Sequence Set connection mode to single connection.</p>
<p>Establish a TCP connection with the remote IP and port.</p>
<p>Prepare to send data (3 bytes).</p>
<p>Send the actual data.</p>
<p>The loop checks for incoming UART messages and depending on the message recieved it parses and applies configuration settings, and on "Start" or "Stop" toggles the simulationEnabled flag. Besides UART handling, when simulationEnabled is true it updates LEDs, reads sensor data, and depending on the sensor data moves servo and sends info to the application if required. Otherwise if simulationEnabled is false it clears LEDs and idles with timed delays.</p>

</div>
</div>
<a id="a132ccc16e94acf34995b29762f916e07" name="a132ccc16e94acf34995b29762f916e07"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a132ccc16e94acf34995b29762f916e07">&#9670;&#160;</a></span>parseConfigMessage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void parseConfigMessage </td>
          <td>(</td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>msg</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parses configuration message in the format "CFG:Key=Value,...". </p>
<p>Locates the "CFG:" prefix and splits the following text into comma-separated Key=Value tokens. <br  />
 For each token, it extracts the key and single-character value and updates the corresponding global config flag. <br  />
 Tokens with unknown keys or missing values are ignored.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>Input message string. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Supports keys for Red, Green, Blue, Yellow, Purple, Orange, Black, White, Brown. </dd></dl>

</div>
</div>
<a id="af5c7cf9db2f8b4ad6c509f61a9a89985" name="af5c7cf9db2f8b4ad6c509f61a9a89985"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5c7cf9db2f8b4ad6c509f61a9a89985">&#9670;&#160;</a></span>populateColorArrayFromConfig()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void populateColorArrayFromConfig </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Populates the color_array based on configuration flags. </p>
<p>This function sets each element of the <code>color_array</code> to 1 if the corresponding configuration variable is set to &lsquo;'L&rsquo;` (indicating that the disk color is tied to the left side), or to 0 otherwise (right side). </p>

</div>
</div>
<a id="ab52be1be8a40794a6b9df64a71a76fb4" name="ab52be1be8a40794a6b9df64a71a76fb4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab52be1be8a40794a6b9df64a71a76fb4">&#9670;&#160;</a></span>sendMovementCommand()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sendMovementCommand </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>side</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>color</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends information on movement over the ESP8266 TCP link. </p>
<p>Formats a <code>MOV#&lt;side&gt;#&lt;color&gt;\r\n</code> message, computes its length, and issues the corresponding <code>AT+CIPSEND=&lt;len&gt;</code> command to the module. After receiving positive prompt, it transmits the movement string and clears the UART buffer to prepare for the next operation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">side</td><td>Movement direction (e.g., "left", "right"). </td></tr>
    <tr><td class="paramname">color</td><td>Color (e.g., "red", "blue"). </td></tr>
  </table>
  </dd>
</dl>
<p>Calculate the length of the data message (not including the null terminator).</p>
<p>&lt; For "MOV#right#orange\r\n", len should be 18.</p>
<p>&lt; Build the AT command with the calculated length.</p>
<p>&lt; Send the AT+CIPSEND command so the module is ready to accept the data.</p>
<p>&lt; Wait for the "&gt;" prompt from the module (adjust delay as needed)</p>
<p>&lt; Now send the actual movement command message</p>
<p>&lt; Give time for the data transmission</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="main_8c.html">main.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
